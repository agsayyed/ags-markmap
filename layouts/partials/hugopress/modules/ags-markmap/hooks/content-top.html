{{- /* Injects Markmap at content-top when ags_markmap is enabled */ -}} 
{{- if .Page.Params.ags_markmap -}}
  <script>console.log("[ags-markmap] ags_markmap is enabled in front matter");</script>

  <div id="ags-markmap-container" class="ags-markmap-container"></div>

  {{- with resources.Get "hb/modules/ags-markmap/vendor/d3.min.js" -}}
    {{- $d3 := . | resources.Minify | resources.Fingerprint -}}
    <script src="{{ $d3.RelPermalink }}" integrity="{{ $d3.Data.Integrity }}" defer></script>
  {{- end -}}

  {{- with resources.Get "hb/modules/ags-markmap/vendor/markmap-view.min.js" -}}
    {{- $mm := . | resources.Minify | resources.Fingerprint -}}
    <script src="{{ $mm.RelPermalink }}" integrity="{{ $mm.Data.Integrity }}" defer></script>
  {{- end -}}

  {{- with resources.Get "hb/modules/ags-markmap/js/index.js" -}}
    {{- $js := . | resources.Minify | resources.Fingerprint -}}
    <script src="{{ $js.RelPermalink }}" integrity="{{ $js.Data.Integrity }}" defer></script>
    <script>
      document.body.dataset.agsMarkmap = 'true'
    </script>
  {{- end -}}
{{- else -}}
  <script>console.log("[ags-markmap] ags_markmap is NOT enabled on this page");</script>
{{- end -}}
